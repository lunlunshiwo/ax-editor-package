{
    "version": 3,
    "file": "dom.js",
    "sourceRoot": "",
    "sources": [
        "/src/utils/dom.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport ReactDOM from 'react-dom';\nimport hoistNonReactStatic = require('hoist-non-react-statics');\nimport domHelperWwnerDocument = require('dom-helpers/ownerDocument');\nimport getOffset = require('dom-helpers/query/offset');\nimport getPosition = require('dom-helpers/query/position');\nimport getScrollTop = require('dom-helpers/query/scrollTop');\n\nconst bsMapping: {\n  [propName: string]: string;\n} = {\n  level: 'bsStyle',\n  classPrefix: 'bsClass',\n  size: 'bsSize'\n};\n\n/**\n * 主要目的是希望在是用 bootstrap 组件的时候不需要带 bs 前缀。\n *\n * @param {Object} rawProps 原始属性对象。\n * @return {Object}\n */\nexport const props2BsProps = (rawProps: {[propName: string]: any}) => {\n  let props: {[propName: string]: any} = {};\n\n  Object.keys(rawProps).forEach(\n    key => (props[bsMapping[key] || key] = rawProps[key])\n  );\n\n  return props;\n};\n\n/**\n * props2BsProps 的 hoc 版本\n *\n * @param {*} ComposedComponent 组合组件\n * @return {Component}\n */\nexport const props2BsPropsHoc: (\n  ComposedComponent: React.ComponentType<any>\n) => React.ComponentType<any> = ComposedComponent => {\n  class BsComponent extends React.Component<any> {\n    render() {\n      return <ComposedComponent {...props2BsProps(this.props)} />;\n    }\n  }\n\n  hoistNonReactStatic(BsComponent, ComposedComponent);\n  return BsComponent;\n};\n\nexport function getContainer(container: any, defaultContainer: any) {\n  container = typeof container === 'function' ? container() : container;\n  return ReactDOM.findDOMNode(container) || defaultContainer;\n}\n\nexport function ownerDocument(componentOrElement: any) {\n  return domHelperWwnerDocument(ReactDOM.findDOMNode(componentOrElement));\n}\n\nfunction getContainerDimensions(containerNode: any) {\n  let width, height, scroll;\n\n  if (containerNode.tagName === 'BODY') {\n    width = window.innerWidth;\n    height = window.innerHeight;\n\n    scroll =\n      getScrollTop(ownerDocument(containerNode).documentElement) ||\n      getScrollTop(containerNode);\n  } else {\n    ({width, height} = getOffset(containerNode));\n    scroll = getScrollTop(containerNode);\n  }\n\n  return {width, height, scroll};\n}\n\nfunction getTopDelta(\n  top: any,\n  overlayHeight: any,\n  container: any,\n  padding: any\n) {\n  const containerDimensions = getContainerDimensions(container);\n  const containerScroll = containerDimensions.scroll;\n  const containerHeight = containerDimensions.height;\n\n  const topEdgeOffset = top - padding - containerScroll;\n  const bottomEdgeOffset = top + padding - containerScroll + overlayHeight;\n\n  if (topEdgeOffset < 0) {\n    return -topEdgeOffset;\n  } else if (bottomEdgeOffset > containerHeight) {\n    return containerHeight - bottomEdgeOffset;\n  } else {\n    return 0;\n  }\n}\n\nfunction getLeftDelta(\n  left: any,\n  overlayWidth: any,\n  container: any,\n  padding: any\n) {\n  const containerDimensions = getContainerDimensions(container);\n  const containerWidth = containerDimensions.width;\n\n  const leftEdgeOffset = left - padding;\n  const rightEdgeOffset = left + padding + overlayWidth;\n\n  if (leftEdgeOffset < 0) {\n    return -leftEdgeOffset;\n  } else if (rightEdgeOffset > containerWidth) {\n    return containerWidth - rightEdgeOffset;\n  }\n\n  return 0;\n}\n\nexport function calculatePosition(\n  placement: any,\n  overlayNode: any,\n  target: any,\n  container: any,\n  padding: any\n) {\n  const childOffset =\n    container.tagName === 'BODY'\n      ? getOffset(target)\n      : getPosition(target, container);\n  const {height: overlayHeight, width: overlayWidth} = getOffset(overlayNode);\n\n  // auto 尝试四个方向对齐。\n  placement =\n    placement === 'auto'\n      ? 'left-bottom-left-top right-bottom-right-top left-top-left-bottom right-top-right-bottom left-bottom-left-top'\n      : placement;\n\n  let positionLeft = 0,\n    positionTop = 0,\n    arrowOffsetLeft: any = '',\n    arrowOffsetTop: any = '',\n    activePlacement: string = placement;\n\n  if (~placement.indexOf('-')) {\n    const tests = placement.split(/\\s+/);\n\n    while (tests.length) {\n      const current = (activePlacement = tests.shift());\n      let [atX, atY, myX, myY] = current.split('-');\n      myX = myX || atX;\n      myY = myY || atY;\n\n      positionLeft =\n        atX === 'left'\n          ? childOffset.left\n          : atX === 'right'\n          ? childOffset.left + childOffset.width\n          : childOffset.left + childOffset.width / 2;\n      positionTop =\n        atY === 'top'\n          ? childOffset.top\n          : atY === 'bottom'\n          ? childOffset.top + childOffset.height\n          : childOffset.top + childOffset.height / 2;\n\n      positionLeft -=\n        myX === 'left' ? 0 : myX === 'right' ? overlayWidth : overlayWidth / 2;\n      positionTop -=\n        myY === 'top'\n          ? 0\n          : myY === 'bottom'\n          ? overlayHeight\n          : overlayHeight / 2;\n\n      // 如果还有其他可选项，则做位置判断，是否在可视区域，不完全在则继续看其他定位情况。\n      if (tests.length) {\n        let clip = target.getBoundingClientRect();\n        const transformed = {\n          x: clip.x + positionLeft - childOffset.left,\n          y: clip.y + positionTop - childOffset.top,\n          width: overlayWidth,\n          height: overlayHeight\n        };\n\n        if (\n          transformed.x > 0 &&\n          transformed.x + transformed.width < window.innerWidth &&\n          transformed.y > 0 &&\n          transformed.y + transformed.height < window.innerHeight\n        ) {\n          break;\n        }\n      }\n    }\n\n    // todo arrow 位置支持\n  } else if (placement === 'left' || placement === 'right') {\n    // atX = placement;\n    // atY = myY = 'center';\n    // myX = placement === 'left' ? 'right' : 'left';\n    if (placement === 'left') {\n      positionLeft = childOffset.left - overlayWidth;\n    } else {\n      positionLeft = childOffset.left + childOffset.width;\n    }\n\n    positionTop = childOffset.top + (childOffset.height - overlayHeight) / 2;\n    const topDelta = getTopDelta(\n      positionTop,\n      overlayHeight,\n      container,\n      padding\n    );\n\n    positionTop += topDelta;\n    arrowOffsetTop = 50 * (1 - (2 * topDelta) / overlayHeight) + '%';\n  } else if (placement === 'top' || placement === 'bottom') {\n    // atY = placement;\n    // atX = myX = 'center';\n    // myY = placement === 'top' ? 'bottom': 'top';\n    if (placement === 'top') {\n      positionTop = childOffset.top - overlayHeight;\n    } else {\n      positionTop = childOffset.top + childOffset.height;\n    }\n\n    positionLeft = childOffset.left + (childOffset.width - overlayWidth) / 2;\n    const leftDelta = getLeftDelta(\n      positionLeft,\n      overlayWidth,\n      container,\n      padding\n    );\n\n    positionLeft += leftDelta;\n    arrowOffsetLeft = 50 * (1 - (2 * leftDelta) / overlayHeight) + '%';\n  } else if ((placement = 'center')) {\n    // atX = atY = myX = myY = 'center';\n    positionLeft = childOffset.left + (childOffset.width - overlayWidth) / 2;\n    positionTop = childOffset.top + (childOffset.height - overlayHeight) / 2;\n    arrowOffsetLeft = arrowOffsetTop = void 0;\n  } else {\n    throw new Error(\n      `calcOverlayPosition(): No such placement of \"${placement}\" found.`\n    );\n  }\n\n  return {\n    positionLeft,\n    positionTop,\n    arrowOffsetLeft,\n    arrowOffsetTop,\n    activePlacement\n  };\n}\n"
    ]
}