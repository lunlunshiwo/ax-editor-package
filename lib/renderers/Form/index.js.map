{
    "version": 3,
    "file": "index.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Form/index.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Renderer, RendererProps} from '../../factory';\nimport {observer} from 'mobx-react';\nimport {FormStore, IFormStore} from '../../store/form';\nimport {Api, SchemaNode, Schema, Action, ApiObject, Payload} from '../../types';\nimport {filter, evalExpression} from '../../utils/tpl';\nimport cx from 'classnames';\nimport getExprProperties from '../../utils/filter-schema';\nimport {\n  promisify,\n  difference,\n  until,\n  noop,\n  isObject,\n  isVisible,\n  createObject,\n  extendObject\n} from '../../utils/helper';\nimport debouce = require('lodash/debounce');\nimport flatten = require('lodash/flatten');\nimport find = require('lodash/find');\nimport Scoped, {\n  ScopedContext,\n  IScopedContext,\n  ScopedComponentType\n} from '../../Scoped';\nimport {IComboStore} from '../../store/combo';\nimport qs = require('qs');\nimport {dataMapping} from '../../utils/tpl-builtin';\nimport {isApiOutdated, isEffectiveApi} from '../../utils/api';\nexport type FormGroup = FormSchema & {\n  title?: string;\n  className?: string;\n};\nexport type FormGroupNode = FormGroup | FormGroupArray;\nexport interface FormGroupArray extends Array<FormGroupNode> {}\n\nexport interface FormSchema {\n  fieldSetClassName?: string;\n  tabsClassName?: string;\n  controls?: SchemaNode;\n  tabs?: FormGroupNode;\n  fieldSet?: FormGroupNode;\n}\n\nexport interface FormHorizontal {\n  leftFixed?: boolean | string;\n  left: string | number;\n  right: string | number;\n  offset: string | number;\n}\n\nexport interface FormProps extends RendererProps, FormSchema {\n  store: IFormStore;\n  wrapperComponent: React.ReactType;\n  title?: string; // 标题\n  submitText?: string;\n  submitOnChange?: boolean; // 设置是否一修改就提交。\n  submitOnInit?: boolean;\n  resetAfterSubmit?: boolean;\n  initApi?: Api; // 可以用来设置初始数据。\n  initAsyncApi?: Api; // 如果 api 处理时间过长，可以开启 initAsyncApi 来处理。轮询检测是否真的完成了。\n  initCheckInterval?: number;\n  initFinishedField?: string;\n  interval?: number;\n  silentPolling?: boolean;\n  stopAutoRefreshWhen?: string;\n  api?: Api; // 用来保存的 api\n  asyncApi?: Api; // 如果 api 处理时间过长，可以开启 asyncApi 来处理。轮询检测是否真的完成了。\n  checkInterval?: number;\n  finishedField?: string;\n  initFetch?: boolean; // 是否初始拉取？\n  initFetchOn?: string;\n  className?: string;\n  body?: SchemaNode;\n  wrapWithPanel?: boolean;\n  panelClassName?: string;\n  mode?: 'normal' | 'inline' | 'horizontal' | 'row';\n  affixFooter?: boolean;\n  collapsable?: boolean;\n  debug?: boolean;\n  autoFocus?: boolean;\n  horizontal: FormHorizontal;\n  canAccessSuperData: boolean;\n  persistData: boolean; // 开启本地缓存\n  clearPersistDataAfterSubmit: boolean; // 提交成功后清空本地缓存\n  trimValues?: boolean;\n  onInit?: (values: object) => any;\n  onReset?: (values: object) => void;\n  onSubmit?: (values: object, action: any) => any;\n  onChange?: (values: object, diff: object) => any;\n  onFailed?: (reason: string, errors: any) => any;\n  onFinished: (values: object, action: any) => any;\n  onValidate: (values: object, form: any) => any;\n  messages: {\n    fetchSuccess?: string;\n    fetchFailed?: string;\n    saveSuccess?: string;\n    saveFailed?: string;\n    validateFailed?: string;\n  };\n}\n\nexport default class Form extends React.Component<FormProps, object> {\n  static defaultProps = {\n    title: '表单',\n    submitText: '提交',\n    initFetch: true,\n    wrapWithPanel: true,\n    mode: 'normal',\n    collapsable: false,\n    controlWidth: 'full',\n    horizontal: {\n      left: 2,\n      right: 10,\n      offset: 2\n    },\n    panelClassName: 'Panel--default',\n    messages: {\n      fetchFailed: '初始化失败',\n      saveSuccess: '保存成功',\n      saveFailed: '保存失败'\n    },\n    wrapperComponent: '',\n    finishedField: 'finished',\n    initFinishedField: 'finished'\n  };\n  static propsList: Array<string> = [\n    'title',\n    'controls',\n    'tabs',\n    'fieldSet',\n    'submitText',\n    'initFetch',\n    'wrapWithPanel',\n    'mode',\n    'collapsable',\n    'horizontal',\n    'panelClassName',\n    'messages',\n    'wrapperComponent',\n    'resetAfterSubmit',\n    'submitOnInit',\n    'submitOnChange',\n    'onInit',\n    'onReset',\n    'onSubmit',\n    'onChange',\n    'onFailed',\n    'onFinished',\n    'canAccessSuperData'\n  ];\n\n  hooks: {\n    [propName: string]: Array<() => Promise<any>>;\n  } = {};\n  asyncCancel: () => void;\n  disposeOnValidate: () => void;\n  shouldLoadInitApi: boolean = false;\n  timer: NodeJS.Timeout;\n  mounted: boolean;\n  constructor(props: FormProps) {\n    super(props);\n\n    this.onInit = this.onInit.bind(this);\n    this.handleAction = this.handleAction.bind(this);\n    this.handleDialogConfirm = this.handleDialogConfirm.bind(this);\n    this.handleDialogClose = this.handleDialogClose.bind(this);\n    this.handleDrawerConfirm = this.handleDrawerConfirm.bind(this);\n    this.handleDrawerClose = this.handleDrawerClose.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n    this.submit = this.submit.bind(this);\n    this.addHook = this.addHook.bind(this);\n    this.removeHook = this.removeHook.bind(this);\n    this.handleChange = debouce(this.handleChange.bind(this), 250, {\n      trailing: true,\n      leading: false\n    });\n    this.renderFormItems = this.renderFormItems.bind(this);\n    this.reload = this.reload.bind(this);\n    this.silentReload = this.silentReload.bind(this);\n    this.initInterval = this.initInterval.bind(this);\n  }\n\n  componentWillMount() {\n    const {store, canAccessSuperData, persistData} = this.props;\n\n    store.setCanAccessSuperData(canAccessSuperData !== false);\n    persistData && store.getPersistData();\n\n    if (\n      store &&\n      store.parentStore &&\n      store.parentStore.storeType === 'ComboStore'\n    ) {\n      const combo = store.parentStore as IComboStore;\n      combo.addForm(store);\n      combo.forms.forEach(item =>\n        item.items.forEach(item => item.unique && item.syncOptions())\n      );\n    }\n  }\n\n  componentDidMount() {\n    const {\n      initApi,\n      initFetch,\n      initFetchOn,\n      initAsyncApi,\n      initFinishedField,\n      initCheckInterval,\n      store,\n      messages: {fetchSuccess, fetchFailed},\n      onValidate\n    } = this.props;\n\n    this.mounted = true;\n\n    if (onValidate) {\n      const finnalValidate = promisify(onValidate);\n      this.disposeOnValidate = this.addHook(async () => {\n        const result = await finnalValidate(store.data, store);\n\n        if (result && isObject(result)) {\n          Object.keys(result).forEach(key => {\n            let msg = result[key];\n            const item = store.getItemByName(key);\n\n            // 没有这个 formItem\n            if (!item) {\n              return;\n            }\n\n            if (msg) {\n              msg = Array.isArray(msg) ? msg : [msg];\n              item.addError(msg);\n            } else {\n              item.clearError();\n            }\n          });\n        }\n      });\n    }\n\n    if (isEffectiveApi(initApi, store.data, initFetch, initFetchOn)) {\n      store\n        .fetchInitData(initApi as any, store.data, {\n          successMessage: fetchSuccess,\n          errorMessage: fetchFailed,\n          onSuccess: () => {\n            if (\n              !isEffectiveApi(initAsyncApi, store.data) ||\n              store.data[initFinishedField || 'finished']\n            ) {\n              return;\n            }\n\n            return until(\n              () => store.checkRemote(initAsyncApi, store.data),\n              (ret: any) => ret && ret[initFinishedField || 'finished'],\n              cancel => (this.asyncCancel = cancel),\n              initCheckInterval\n            );\n          }\n        })\n        .then(this.initInterval)\n        .then(this.onInit);\n    } else {\n      this.onInit();\n    }\n  }\n\n  componentDidUpdate(prevProps: FormProps) {\n    const props = this.props;\n    const store = props.store;\n\n    if (\n      isApiOutdated(\n        prevProps.initApi,\n        props.initApi,\n        prevProps.data,\n        props.data\n      )\n    ) {\n      const {fetchSuccess, fetchFailed} = props;\n\n      store\n        .fetchData(props.initApi as Api, store.data, {\n          successMessage: fetchSuccess,\n          errorMessage: fetchFailed\n        })\n        .then(this.initInterval);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    clearTimeout(this.timer);\n    (this.handleChange as any).cancel();\n    this.asyncCancel && this.asyncCancel();\n    this.disposeOnValidate && this.disposeOnValidate();\n    const store = this.props.store;\n\n    if (\n      store &&\n      store.parentStore &&\n      store.parentStore.storeType === 'ComboStore'\n    ) {\n      const combo = store.parentStore as IComboStore;\n      combo.removeForm(store);\n    }\n  }\n\n  async onInit() {\n    const {onInit, store, submitOnInit} = this.props;\n\n    // 先拿出来数据，主要担心 form 被什么东西篡改了，然后又应用出去了\n    // 之前遇到过问题，所以拿出来了。但是 options  loadOptions 默认值失效了。\n    // 所以目前需要两个都要设置一下，再 init Hook 里面。\n    const data = {...store.data};\n\n    store.setInited(true);\n    const hooks: Array<(data: any) => Promise<any>> = this.hooks['init'] || [];\n    await Promise.all(hooks.map(hook => hook(data)));\n\n    onInit && onInit(extendObject(store.data, data));\n\n    submitOnInit &&\n      this.handleAction(\n        undefined,\n        {\n          type: 'submit'\n        },\n        store.data\n      );\n  }\n\n  reload(query?: any, silent?: boolean) {\n    if (query) {\n      return this.receive(query);\n    }\n\n    const {\n      store,\n      initApi,\n      initAsyncApi,\n      initFinishedField,\n      messages: {fetchSuccess, fetchFailed}\n    } = this.props;\n\n    isEffectiveApi(initAsyncApi, store.data) &&\n      store.updateData({\n        [initFinishedField || 'finished']: false\n      });\n\n    isEffectiveApi(initApi, store.data)\n      ? store\n          .fetchInitData(initApi, store.data, {\n            successMessage: fetchSuccess,\n            errorMessage: fetchFailed,\n            silent,\n            onSuccess: () => {\n              if (\n                !isEffectiveApi(initAsyncApi, store.data) ||\n                store.data[initFinishedField || 'finished']\n              ) {\n                return;\n              }\n\n              return until(\n                () => store.checkRemote(initAsyncApi, store.data),\n                (ret: any) => ret && ret[initFinishedField || 'finished'],\n                cancel => (this.asyncCancel = cancel)\n              );\n            }\n          })\n          .then(this.initInterval)\n          .then(() => store.reset(undefined, false))\n      : store.reset(undefined, false);\n  }\n\n  receive(values: object) {\n    const {store} = this.props;\n\n    store.updateData(values);\n    this.reload();\n  }\n\n  silentReload(target?: string, query?: any) {\n    this.reload(query, true);\n  }\n\n  initInterval(value: any) {\n    const {interval, silentPolling, stopAutoRefreshWhen, data} = this.props;\n\n    clearTimeout(this.timer);\n    interval &&\n      this.mounted &&\n      (!stopAutoRefreshWhen || !evalExpression(stopAutoRefreshWhen, data)) &&\n      (this.timer = setTimeout(\n        silentPolling ? this.silentReload : this.reload,\n        Math.max(interval, 3000)\n      ));\n    return value;\n  }\n\n  isValidated() {\n    return this.props.store.validated;\n  }\n\n  validate(forceValidate?: boolean): Promise<boolean> {\n    const {store} = this.props;\n\n    return store.validate(this.hooks['validate'] || [], forceValidate);\n  }\n\n  clearErrors() {\n    const {store} = this.props;\n\n    return store.clearErrors();\n  }\n\n  submit(fn?: (values: object) => Promise<any>): Promise<any> {\n    const {store, messages} = this.props;\n\n    return store.submit(\n      fn,\n      this.hooks['validate' || []],\n      messages && messages.validateFailed\n    );\n  }\n\n  reset() {\n    const {store, onReset} = this.props;\n    store.reset(onReset);\n  }\n\n  addHook(fn: () => any, type: string = 'validate') {\n    this.hooks[type] = this.hooks[type] || [];\n    this.hooks[type].push(promisify(fn));\n    return () => {\n      this.removeHook(fn, type);\n      fn = noop;\n    };\n  }\n\n  removeHook(fn: () => any, type: string = 'validate') {\n    const hooks = this.hooks[type];\n\n    if (!hooks) {\n      return;\n    }\n\n    for (let i = 0, len = hooks.length; i < len; i++) {\n      let hook = hooks[i];\n\n      if ((hook as any).raw === fn) {\n        hooks.splice(i, 1);\n        len--;\n        i--;\n      }\n    }\n  }\n\n  handleChange(value: any, name: string, submit: boolean) {\n    const {onChange, store, submitOnChange} = this.props;\n\n    onChange && onChange(store.data, difference(store.data, store.pristine));\n\n    (submit || submitOnChange) &&\n      this.handleAction(\n        undefined,\n        {\n          type: 'submit'\n        },\n        store.data\n      );\n  }\n\n  handleFormSubmit(e: React.UIEvent<any>) {\n    e.preventDefault();\n    return this.handleAction(\n      e,\n      {\n        type: 'submit'\n      },\n      this.props.store.data\n    );\n  }\n\n  handleAction(\n    e: React.UIEvent<any> | void,\n    action: Action,\n    data: object,\n    throwErrors: boolean = false,\n    delegate?: boolean\n  ): any {\n    const {\n      store,\n      onSubmit,\n      api,\n      asyncApi,\n      finishedField,\n      checkInterval,\n      messages: {saveSuccess, saveFailed},\n      resetAfterSubmit,\n      onAction,\n      onSaved,\n      onReset,\n      onFinished,\n      onFailed,\n      redirect,\n      reload,\n      target,\n      env,\n      onChange,\n      clearPersistDataAfterSubmit,\n      trimValues\n    } = this.props;\n\n    if (trimValues) {\n      store.trimValues();\n    }\n\n    if (Array.isArray(action.required) && action.required.length) {\n      return store.validateFields(action.required).then(result => {\n        if (!result) {\n          env.notify('error', '依赖的部分字段没有通过验证，请注意填写！');\n        } else {\n          this.handleAction(\n            e,\n            {...action, required: undefined},\n            data,\n            throwErrors,\n            delegate\n          );\n        }\n      });\n    }\n\n    delegate || store.setCurrentAction(action);\n    if (\n      action.type === 'submit' ||\n      action.actionType === 'submit' ||\n      action.actionType === 'confirm'\n    ) {\n      return this.submit(\n        (values): any => {\n          if (onSubmit && onSubmit(values, action) === false) {\n            return Promise.resolve(values);\n          }\n\n          if (target) {\n            this.submitToTarget(target, values);\n          } else if (action.actionType === 'reload') {\n            action.target && this.reloadTarget(action.target, values);\n          } else if (action.actionType === 'dialog') {\n            store.openDialog(data);\n          } else if (action.actionType === 'drawer') {\n            store.openDrawer(data);\n          } else if (isEffectiveApi(action.api || api, values)) {\n            let finnalAsyncApi = action.asyncApi || asyncApi;\n\n            isEffectiveApi(finnalAsyncApi, store.data) &&\n              store.updateData({\n                [finishedField || 'finished']: false\n              });\n\n            return store\n              .saveRemote(action.api || (api as Api), values, {\n                successMessage: saveSuccess,\n                errorMessage: saveFailed,\n                onSuccess: () => {\n                  if (\n                    !isEffectiveApi(finnalAsyncApi, store.data) ||\n                    store.data[finishedField || 'finished']\n                  ) {\n                    return;\n                  }\n\n                  return until(\n                    () => store.checkRemote(finnalAsyncApi as Api, store.data),\n                    (ret: any) => ret && ret[finishedField || 'finished'],\n                    cancel => (this.asyncCancel = cancel),\n                    checkInterval\n                  );\n                }\n              })\n              .then(async response => {\n                onSaved && onSaved(values, response);\n\n                // submit 也支持 feedback\n                if (action.feedback && isVisible(action.feedback, store.data)) {\n                  await this.openFeedback(action.feedback, store.data);\n                }\n\n                return values;\n              });\n          }\n\n          return Promise.resolve(values);\n        }\n      )\n        .then(values => {\n          if (onFinished && onFinished(values, action) === false) {\n            return values;\n          }\n\n          resetAfterSubmit && store.reset(onReset);\n          clearPersistDataAfterSubmit && store.clearPersistData();\n\n          if (action.redirect || redirect) {\n            env.updateLocation(filter(action.redirect || redirect, store.data));\n          } else if (action.reload || reload) {\n            this.reloadTarget(action.reload || reload, store.data);\n          }\n\n          return values;\n        })\n        .catch(reason => {\n          onFailed && onFailed(reason, store.errors);\n\n          if (throwErrors) {\n            throw reason;\n          }\n        });\n    } else if (action.type === 'reset') {\n      store.reset(onReset);\n    } else if (action.actionType === 'dialog') {\n      store.openDialog(data);\n    } else if (action.actionType === 'drawer') {\n      store.openDrawer(data);\n    } else if (action.actionType === 'ajax') {\n      if (!isEffectiveApi(action.api)) {\n        return env.alert(`当 actionType 为 ajax 时，请设置 api 属性`);\n      }\n\n      return store\n        .saveRemote(action.api as Api, data, {\n          successMessage:\n            (action.messages && action.messages.success) || saveSuccess,\n          errorMessage:\n            (action.messages && action.messages.failed) || saveFailed\n        })\n        .then(async response => {\n          response &&\n            onChange &&\n            onChange(store.data, difference(store.data, store.pristine));\n          if (store.validated) {\n            await this.validate(true);\n          }\n\n          if (action.feedback && isVisible(action.feedback, store.data)) {\n            await this.openFeedback(action.feedback, store.data);\n          }\n\n          action.redirect &&\n            env.updateLocation(filter(action.redirect, store.data));\n          action.reload && this.reloadTarget(action.reload, store.data);\n        })\n        .catch(() => {});\n    } else if (action.actionType === 'reload') {\n      action.target && this.reloadTarget(action.target, data);\n    } else if (onAction) {\n      // 不识别的丢给上层去处理。\n      return onAction(e, action, data, throwErrors);\n    }\n  }\n\n  handleDialogConfirm(\n    values: object[],\n    action: Action,\n    ctx: any,\n    targets: Array<any>\n  ) {\n    const {store, onChange} = this.props;\n\n    if (\n      (action.mergeData || store.action.mergeData) &&\n      values.length === 1 &&\n      values[0] &&\n      targets[0].props.type === 'form'\n    ) {\n      store.updateData(values[0]);\n      onChange && onChange(store.data, difference(store.data, store.pristine));\n    }\n\n    store.closeDialog(true);\n  }\n\n  handleDialogClose() {\n    const {store} = this.props;\n    store.closeDialog(false);\n  }\n\n  handleDrawerConfirm(\n    values: object[],\n    action: Action,\n    ctx: any,\n    targets: Array<any>\n  ) {\n    const {store, onChange} = this.props;\n\n    if (\n      (action.mergeData || store.action.mergeData) &&\n      values.length === 1 &&\n      values[0] &&\n      targets[0].props.type === 'form'\n    ) {\n      store.updateData(values[0]);\n      onChange && onChange(store.data, difference(store.data, store.pristine));\n    }\n\n    store.closeDrawer(true);\n  }\n\n  handleDrawerClose() {\n    const {store} = this.props;\n    store.closeDrawer(false);\n  }\n\n  submitToTarget(target: string, values: object) {\n    // 会被覆写\n  }\n\n  reloadTarget(target: string, data?: any) {\n    // 会被覆写\n  }\n\n  openFeedback(dialog: any, ctx: any) {\n    return new Promise(resolve => {\n      const {store} = this.props;\n      store.setCurrentAction({\n        type: 'button',\n        actionType: 'dialog',\n        dialog: dialog\n      });\n      store.openDialog(ctx, undefined, confirmed => {\n        resolve(confirmed);\n      });\n    });\n  }\n\n  buildActions() {\n    const {actions, submitText, controls} = this.props;\n\n    if (\n      typeof actions !== 'undefined' ||\n      !submitText ||\n      (Array.isArray(controls) &&\n        controls.some(\n          item =>\n            !!~['submit', 'button', 'reset', 'button-group'].indexOf(\n              (item as Schema).type\n            )\n        ))\n    ) {\n      return actions;\n    }\n\n    return [\n      {\n        type: 'submit',\n        label: submitText,\n        primary: true\n      }\n    ];\n  }\n\n  renderFormItems(\n    schema: FormSchema,\n    region: string = '',\n    otherProps: Partial<FormProps> = {}\n  ): React.ReactNode {\n    return this.renderControls(\n      schema.controls as SchemaNode,\n      region,\n      otherProps\n    );\n\n    // return schema.tabs ? this.renderTabs(schema.tabs, schema, region)\n    // : schema.fieldSet ? this.renderFiledSet(schema.fieldSet, schema, region) : this.renderControls(schema.controls as SchemaNode, schema, region);\n  }\n\n  renderControls(\n    controls: SchemaNode,\n    region: string,\n    otherProps: Partial<FormProps> = {}\n  ): React.ReactNode {\n    controls = controls || [];\n\n    if (!Array.isArray(controls)) {\n      controls = [controls];\n    }\n\n    if (this.props.mode === 'row') {\n      const ns = this.props.classPrefix;\n\n      controls = flatten(controls).filter(item => {\n        if ((item as Schema).hidden || (item as Schema).visible === false) {\n          return false;\n        }\n\n        const exprProps = getExprProperties(\n          item as Schema,\n          this.props.store.data\n        );\n        if (exprProps.hidden || exprProps.visible === false) {\n          return false;\n        }\n\n        return true;\n      });\n\n      if (!controls.length) {\n        return null;\n      }\n\n      return (\n        <div className={`${ns}Form-row`}>\n          {controls.map((control, key) =>\n            ~['hidden', 'formula'].indexOf((control as any).type) ||\n            (control as any).mode === 'inline' ? (\n              this.renderControl(control, key, otherProps)\n            ) : (\n              <div\n                key={key}\n                className={cx(\n                  `${ns}Form-col`,\n                  (control as Schema).columnClassName\n                )}\n              >\n                {this.renderControl(control, '', {\n                  ...otherProps,\n                  mode: 'row'\n                })}\n              </div>\n            )\n          )}\n        </div>\n      );\n    }\n\n    return controls.map((control, key) =>\n      this.renderControl(control, key, otherProps, region)\n    );\n  }\n\n  renderControl(\n    control: SchemaNode,\n    key: any = '',\n    otherProps: Partial<FormProps> = {},\n    region: string = ''\n  ): React.ReactNode {\n    if (!control) {\n      return null;\n    } else if (typeof control === 'string') {\n      control = {\n        type: 'tpl',\n        tpl: control\n      };\n    }\n\n    const props = {\n      ...this.props,\n      ...otherProps\n    };\n    const form = this.props.store;\n    const {\n      render,\n      mode,\n      horizontal,\n      store,\n      disabled,\n      controlWidth,\n      resolveDefinitions\n    } = props;\n\n    const subProps = {\n      formStore: form,\n      data: store.data,\n      key,\n      formInited: form.inited,\n      formMode: mode,\n      formHorizontal: horizontal,\n      controlWidth,\n      disabled: disabled || (control as Schema).disabled || form.loading,\n      btnDisabled: form.loading || form.validating,\n      onAction: this.handleAction,\n      onChange: this.handleChange,\n      addHook: this.addHook,\n      removeHook: this.removeHook,\n      renderFormItems: this.renderFormItems,\n      formPristine: form.pristine\n    };\n\n    const subSchema: any =\n      control && (control as Schema).type === 'control'\n        ? control\n        : {\n            type: 'control',\n            control\n          };\n\n    if (subSchema.control) {\n      let control = subSchema.control as Schema;\n      if (control.$ref) {\n        subSchema.control = control = {\n          ...resolveDefinitions(control.$ref),\n          ...control\n        };\n        delete control.$ref;\n      }\n      control.hiddenOn && (subSchema.hiddenOn = control.hiddenOn);\n      control.visibleOn && (subSchema.visibleOn = control.visibleOn);\n    }\n\n    return render(`${region ? `${region}/` : ''}${key}`, subSchema, subProps);\n  }\n\n  renderBody() {\n    const {tabs, fieldSet, controls} = this.props;\n\n    return this.renderFormItems({\n      tabs,\n      fieldSet,\n      controls\n    });\n  }\n\n  render() {\n    const {\n      className,\n      wrapWithPanel,\n      render,\n      title,\n      store,\n      panelClassName,\n      debug,\n      headerClassName,\n      footerClassName,\n      actionsClassName,\n      bodyClassName,\n      classPrefix: ns,\n      classnames: cx,\n      $path,\n      affixFooter,\n      mode\n    } = this.props;\n    const WrapperComponent =\n      this.props.wrapperComponent ||\n      (/(?:\\/|^)form\\//.test($path as string) ? 'div' : 'form');\n\n    let body = (\n      <WrapperComponent\n        onSubmit={this.handleFormSubmit}\n        className={cx(`Form`, `Form--${mode || 'normal'}`, className)}\n        noValidate\n      >\n        {debug ? (\n          <pre>\n            <code>{JSON.stringify(store.data, null, 2)}</code>\n          </pre>\n        ) : null}\n\n        {this.renderBody()}\n\n        {render(\n          'modal',\n          {\n            ...((store.action as Action) &&\n              ((store.action as Action).dialog as object)),\n            type: 'dialog'\n          },\n          {\n            key: 'dialog',\n            data: store.dialogData,\n            onConfirm: this.handleDialogConfirm,\n            onClose: this.handleDialogClose,\n            show: store.dialogOpen\n          }\n        )}\n\n        {render(\n          'modal',\n          {\n            ...((store.action as Action) &&\n              ((store.action as Action).drawer as object)),\n            type: 'drawer'\n          },\n          {\n            key: 'drawer',\n            data: store.drawerData,\n            onConfirm: this.handleDrawerConfirm,\n            onClose: this.handleDrawerClose,\n            show: store.drawerOpen\n          }\n        )}\n      </WrapperComponent>\n    );\n\n    if (wrapWithPanel) {\n      body = render(\n        'body',\n        {\n          type: 'panel',\n          title: title\n        },\n        {\n          className: cx(panelClassName, 'Panel--form'),\n          children: body,\n          actions: this.buildActions(),\n          onAction: this.handleAction,\n          disabled: store.loading,\n          btnDisabled: store.loading || store.validating,\n          headerClassName,\n          footerClassName,\n          actionsClassName,\n          bodyClassName,\n          affixFooter\n        }\n      ) as JSX.Element;\n    }\n\n    return body;\n  }\n}\n\n@Renderer({\n  test: (path: string) =>\n    /(^|\\/)form$/.test(path) &&\n    !/(^|\\/)form(?:\\/.+)?\\/control\\/form$/.test(path),\n  storeType: FormStore.name,\n  name: 'form',\n  isolateScope: true\n})\nexport class FormRenderer extends Form {\n  static contextType = ScopedContext;\n\n  componentWillMount() {\n    const scoped = this.context as IScopedContext;\n    scoped.registerComponent(this);\n    super.componentWillMount();\n  }\n\n  componentDidMount() {\n    super.componentDidMount();\n\n    if (this.props.autoFocus) {\n      const scoped = this.context as IScopedContext;\n      const inputs = scoped.getComponents();\n      let focuableInput = find(\n        inputs,\n        input => input.focus\n      ) as ScopedComponentType;\n      focuableInput && setTimeout(() => focuableInput.focus!(), 200);\n    }\n  }\n\n  componentWillUnmount() {\n    const scoped = this.context as IScopedContext;\n    scoped.unRegisterComponent(this);\n  }\n\n  doAction(action: Action, data: object, throwErrors: boolean = false) {\n    return this.handleAction(undefined, action, data, throwErrors);\n  }\n\n  handleAction(\n    e: React.UIEvent<any> | undefined,\n    action: Action,\n    ctx: object,\n    throwErrors: boolean = false,\n    delegate?: boolean\n  ) {\n    if (action.target && action.actionType !== 'reload') {\n      const scoped = this.context as IScopedContext;\n\n      return Promise.all(\n        action.target.split(',').map(name => {\n          let target = scoped.getComponentByName(name);\n          return (\n            target &&\n            target.doAction &&\n            target.doAction(\n              {\n                ...action,\n                target: undefined\n              },\n              ctx,\n              throwErrors\n            )\n          );\n        })\n      );\n    } else {\n      return super.handleAction(e, action, ctx, throwErrors, delegate);\n    }\n  }\n\n  handleDialogConfirm(\n    values: object[],\n    action: Action,\n    ctx: any,\n    targets: Array<any>\n  ) {\n    super.handleDialogConfirm(values, action, ctx, targets);\n\n    const store = this.props.store;\n    const scoped = this.context as IScopedContext;\n\n    if (action.reload) {\n      scoped.reload(action.reload, ctx);\n    } else if (store.action && store.action.reload) {\n      scoped.reload(store.action.reload, ctx);\n    }\n  }\n\n  submitToTarget(target: string, values: object) {\n    const scoped = this.context as IScopedContext;\n    scoped.send(target, values);\n  }\n\n  reloadTarget(target: string, data: any) {\n    const scoped = this.context as IScopedContext;\n    scoped.reload(target, data);\n  }\n\n  reload(target?: string, query?: any, ctx?: any) {\n    if (query) {\n      return this.receive(query);\n    }\n\n    const scoped = this.context as IScopedContext;\n    let subPath: string = '';\n    let idx: number;\n    let subQuery: any = null;\n    if (target && ~(idx = target.indexOf('.'))) {\n      subPath = target.substring(idx + 1);\n      target = target.substring(0, idx);\n    }\n    const idx2 = target ? target.indexOf('?') : -1;\n    if (~idx2) {\n      subQuery = dataMapping(\n        qs.parse((target as string).substring(idx2 + 1)),\n        ctx\n      );\n      target = (target as string).substring(0, idx2);\n    }\n\n    let component;\n    if (\n      target &&\n      (component = scoped.getComponentByName(target)) &&\n      component.reload\n    ) {\n      component.reload(subPath, subQuery, ctx);\n    } else if (target === '*') {\n      super.reload();\n      const components = scoped.getComponents();\n      components.forEach(\n        (component: any) =>\n          component.reload && component.reload('', subQuery, ctx)\n      );\n    } else {\n      super.reload();\n    }\n  }\n\n  receive(values: object, name?: string) {\n    if (name) {\n      const scoped = this.context as IScopedContext;\n      const idx = name.indexOf('.');\n      let subPath = '';\n\n      if (~idx) {\n        subPath = name.substring(1 + idx);\n        name = name.substring(0, idx);\n      }\n\n      const component = scoped.getComponentByName(name);\n      component && component.receive && component.receive(values, subPath);\n      return;\n    }\n\n    return super.receive(values);\n  }\n}\n"
    ]
}