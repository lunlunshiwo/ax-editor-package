{
    "version": 3,
    "file": "iRenderer.js",
    "sourceRoot": "",
    "sources": [
        "/src/store/iRenderer.ts"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import {types, getRoot, Instance} from 'mobx-state-tree';\nimport {extendObject, createObject} from '../utils/helper';\nimport {IRendererStore} from './index';\nimport {dataMapping} from '../utils/tpl-builtin';\nimport {SimpleMap} from '../utils/SimpleMap';\n\nexport const iRendererStore = types\n  .model('iRendererStore', {\n    id: types.identifier,\n    path: '',\n    storeType: types.string,\n    hasRemoteData: types.optional(types.boolean, false),\n    data: types.optional(types.frozen(), {}),\n    updatedAt: 0, // 从服务端更新时刻\n    pristine: types.optional(types.frozen(), {}),\n    parentId: types.optional(types.string, ''),\n    action: types.optional(types.frozen(), undefined),\n    dialogOpen: false,\n    dialogData: types.optional(types.frozen(), undefined),\n    drawerOpen: false,\n    drawerData: types.optional(types.frozen(), undefined)\n  })\n  .views(self => {\n    return {\n      // todo 不能自己引用自己\n      get parentStore(): any {\n        return self.parentId &&\n          getRoot(self) &&\n          (getRoot(self) as IRendererStore).storeType === 'RendererStore'\n          ? (getRoot(self) as IRendererStore).stores.get(self.parentId)\n          : null;\n      }\n    };\n  })\n  .actions(self => {\n    const dialogCallbacks = new SimpleMap<(result?: any) => void>();\n\n    return {\n      initData(data: object = {}) {\n        self.pristine = data;\n        self.data = data;\n      },\n\n      reset() {\n        self.data = self.pristine;\n      },\n\n      updateData(data: object = {}, tag?: object) {\n        const prev = self.data;\n        let newData;\n        if (tag) {\n          let proto = createObject((self.data as any).__super || null, tag);\n          newData = createObject(proto, {\n            ...self.data,\n            ...data\n          });\n        } else {\n          newData = extendObject(self.data, data);\n        }\n\n        Object.defineProperty(newData, '__prev', {\n          value: {...prev},\n          enumerable: false,\n          configurable: false,\n          writable: false\n        });\n\n        self.data = newData;\n      },\n\n      setCurrentAction(action: object) {\n        self.action = action;\n      },\n\n      openDialog(ctx: any, additonal?: object, callback?: (ret: any) => void) {\n        let proto = ctx.__super ? ctx.__super : self.data;\n\n        if (additonal) {\n          proto = createObject(proto, additonal);\n        }\n\n        const data = createObject(proto, {\n          ...ctx\n        });\n\n        if (self.action.dialog && self.action.dialog.data) {\n          self.dialogData = dataMapping(self.action.dialog.data, data);\n\n          const clonedAction = {\n            ...self.action,\n            dialog: {\n              ...self.action.dialog\n            }\n          };\n          delete clonedAction.dialog.data;\n          self.action = clonedAction;\n        } else {\n          self.dialogData = data;\n        }\n        self.dialogOpen = true;\n        callback && dialogCallbacks.set(self.dialogData, callback);\n      },\n\n      closeDialog(result?: any) {\n        const callback = dialogCallbacks.get(self.dialogData);\n\n        self.dialogOpen = false;\n\n        if (callback) {\n          dialogCallbacks.delete(self.dialogData);\n          setTimeout(() => callback(result), 200);\n        }\n      },\n\n      openDrawer(ctx: any, additonal?: object, callback?: (ret: any) => void) {\n        let proto = ctx.__super ? ctx.__super : self.data;\n\n        if (additonal) {\n          proto = createObject(proto, additonal);\n        }\n\n        const data = createObject(proto, {\n          ...ctx\n        });\n\n        if (self.action.drawer.data) {\n          self.drawerData = dataMapping(self.action.drawer.data, data);\n\n          const clonedAction = {\n            ...self.action,\n            dialog: {\n              ...self.action.dialog\n            }\n          };\n          delete clonedAction.dialog.data;\n          self.action = clonedAction;\n        } else {\n          self.drawerData = data;\n        }\n        self.drawerOpen = true;\n\n        if (callback) {\n          dialogCallbacks.set(self.drawerData, callback);\n        }\n      },\n\n      closeDrawer(result?: any) {\n        const callback = dialogCallbacks.get(self.drawerData);\n        self.drawerOpen = false;\n\n        if (callback) {\n          dialogCallbacks.delete(self.drawerData);\n          setTimeout(() => callback(result), 200);\n        }\n      }\n    };\n  });\n\nexport type IIRendererStore = typeof iRendererStore.Type;\nexport type SIRendererStore = typeof iRendererStore.SnapshotType;\n// export type SIRendererStore = typeof iRendererStore.SnapshotType;\n"
    ]
}