{
    "version": 3,
    "file": "Toast.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/Toast.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "/**\n * @file Toast\n * @description toast提示组件, 单例模式，App级别只需要一个ToastComponent，引入了多个会兼容，也只有第一个生效\n * @author fex\n */\n\nimport Transition, {\n  ENTERED,\n  ENTERING,\n  EXITING,\n  EXITED\n} from 'react-transition-group/Transition';\nimport React from 'react';\nimport cx from 'classnames';\nimport Html from './Html';\nimport {uuid, autobind} from '../utils/helper';\nimport {ClassNamesFn, themeable} from '../theme';\n\nconst fadeStyles: {\n  [propName: string]: string;\n} = {\n  [ENTERING]: 'in',\n  [ENTERED]: 'in',\n  [EXITING]: 'out'\n};\n\nlet toastRef: any = null;\nlet config: {\n  closeButton?: boolean;\n  timeOut?: number;\n  extendedTimeOut?: number;\n} = {};\n\nconst show = (\n  content: string,\n  title: string = '',\n  conf: any = {},\n  method: string\n) => {\n  if (!toastRef || !toastRef[method]) {\n    return;\n  }\n  toastRef[method](content, title || '', {...config, ...conf});\n};\n\ninterface ToastComponentProps {\n  position:\n    | 'top-right'\n    | 'top-center'\n    | 'top-left'\n    | 'bottom-center'\n    | 'bottom-left'\n    | 'bottom-right';\n  closeButton: boolean;\n  timeOut: number;\n  extendedTimeOut: number;\n  classPrefix: string;\n  classnames: ClassNamesFn;\n  className?: string;\n}\n\ninterface Item {\n  title?: string;\n  body: string;\n  level: 'info' | 'success' | 'error' | 'warning';\n  id: string;\n}\n\ninterface ToastComponentState {\n  items: Array<Item>;\n}\n\nexport class ToastComponent extends React.Component<\n  ToastComponentProps,\n  ToastComponentState\n> {\n  static defaultProps: Pick<\n    ToastComponentProps,\n    'position' | 'closeButton' | 'timeOut' | 'extendedTimeOut'\n  > = {\n    position: 'top-right',\n    closeButton: false,\n    timeOut: 5000,\n    extendedTimeOut: 3000\n  };\n\n  // 当前ToastComponent是否真正render了\n  hasRendered = false;\n  state: ToastComponentState = {\n    items: []\n  };\n\n  componentWillMount() {\n    const {closeButton, timeOut, extendedTimeOut} = this.props;\n    config = {\n      closeButton,\n      timeOut,\n      extendedTimeOut\n    };\n  }\n\n  componentDidMount() {\n    this.hasRendered = true;\n    toastRef = this;\n  }\n\n  componentWillUnmount() {\n    if (this.hasRendered) {\n      toastRef = null;\n    }\n  }\n\n  notifiy(level: string, content: string, title?: string, config?: any) {\n    const items = this.state.items.concat();\n    items.push({\n      title: title,\n      body: content,\n      level,\n      ...config,\n      id: uuid()\n    });\n    this.setState({\n      items\n    });\n  }\n\n  @autobind\n  success(content: string, title?: string, config?: any) {\n    this.notifiy('success', content, title, config);\n  }\n\n  @autobind\n  error(content: string, title?: string, config?: any) {\n    this.notifiy('error', content, title, config);\n  }\n\n  @autobind\n  info(content: string, title?: string, config?: any) {\n    this.notifiy('info', content, title, config);\n  }\n\n  @autobind\n  warning(content: string, title?: string, config?: any) {\n    this.notifiy('warning', content, title, config);\n  }\n\n  handleDismissed(index: number) {\n    const items = this.state.items.concat();\n    items.splice(index, 1);\n    this.setState({\n      items: items\n    });\n  }\n\n  render() {\n    if (toastRef && !this.hasRendered) {\n      return null;\n    }\n\n    const {classPrefix: ns, className, timeOut, position} = this.props;\n    const items = this.state.items;\n\n    return (\n      <div\n        className={cx(\n          `${ns}Toast-wrap ${ns}Toast-wrap--${position.replace(\n            /\\-(\\w)/g,\n            (_, l) => l.toUpperCase()\n          )}`,\n          className\n        )}\n      >\n        {items.map((item, index) => (\n          <ToastMessage\n            key={item.id}\n            classPrefix={ns}\n            title={item.title}\n            body={item.body}\n            level={item.level || 'info'}\n            timeOut={timeOut}\n            onDismiss={this.handleDismissed.bind(this, index)}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default themeable(ToastComponent);\n\ninterface ToastMessageProps {\n  title?: string;\n  body: string;\n  level: 'info' | 'success' | 'error' | 'warning';\n  timeOut: number;\n  position:\n    | 'top-right'\n    | 'top-center'\n    | 'top-left'\n    | 'bottom-center'\n    | 'bottom-left'\n    | 'bottom-right';\n  onDismiss?: () => void;\n  classPrefix: string;\n  allowHtml: boolean;\n}\n\ninterface ToastMessageState {\n  visible: boolean;\n}\n\nexport class ToastMessage extends React.Component<ToastMessageProps> {\n  static defaultProps = {\n    timeOut: 5000,\n    classPrefix: '',\n    position: 'top-right',\n    allowHtml: true,\n    level: 'info'\n  };\n\n  state = {\n    visible: false\n  };\n\n  // content: React.RefObject<HTMLDivElement>;\n  timer: NodeJS.Timeout;\n  constructor(props: ToastMessageProps) {\n    super(props);\n\n    // this.content = React.createRef();\n    this.handleMouseEnter = this.handleMouseEnter.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.handleEntered = this.handleEntered.bind(this);\n    this.close = this.close.bind(this);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timer);\n  }\n\n  componentDidMount() {\n    this.setState({\n      visible: true\n    });\n  }\n\n  handleMouseEnter() {\n    clearTimeout(this.timer);\n  }\n\n  handleMouseLeave() {\n    this.handleEntered();\n  }\n\n  handleEntered() {\n    const timeOut = this.props.timeOut;\n    this.timer = setTimeout(this.close, timeOut);\n  }\n\n  close() {\n    clearTimeout(this.timer);\n    this.setState({\n      visible: false\n    });\n  }\n\n  render() {\n    const {\n      onDismiss,\n      classPrefix: ns,\n      position,\n      title,\n      body,\n      allowHtml,\n      level\n    } = this.props;\n\n    return (\n      <Transition\n        mountOnEnter\n        unmountOnExit\n        in={this.state.visible}\n        timeout={750}\n        onEntered={this.handleEntered}\n        onExited={onDismiss}\n      >\n        {(status: string) => {\n          // if (status === ENTERING) {\n          //     // force reflow\n          //     // 由于从 mount 进来到加上 in 这个 class 估计是时间太短，上次的样式还没应用进去，所以这里强制reflow一把。\n          //     // 否则看不到动画。\n          //     this.content.current && this.content.current.offsetWidth;\n          // }\n\n          return (\n            <div\n              // ref={this.content}\n              className={cx(\n                `${ns}Toast ${ns}Toast--${level}`,\n                fadeStyles[status]\n              )}\n              onMouseEnter={this.handleMouseEnter}\n              onMouseLeave={this.handleMouseLeave}\n              onClick={this.close}\n            >\n              {title ? <div className={`${ns}Toast-title`}>{title}</div> : null}\n              <div className={`${ns}Toast-body`}>\n                {allowHtml ? <Html html={body} /> : body}\n              </div>\n            </div>\n          );\n        }}\n      </Transition>\n    );\n  }\n}\n\nexport const toast = {\n  container: toastRef,\n  success: (content: string, title?: string, conf?: any) =>\n    show(content, title, conf, 'success'),\n  error: (content: string, title?: string, conf?: any) =>\n    show(content, title, conf, 'error'),\n  info: (content: string, title?: string, conf?: any) =>\n    show(content, title, conf, 'info'),\n  warning: (content: string, title?: string, conf?: any) =>\n    show(content, title, conf, 'warning')\n};\n"
    ]
}