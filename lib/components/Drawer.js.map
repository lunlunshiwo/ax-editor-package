{
    "version": 3,
    "file": "Drawer.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/Drawer.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "/**\n * @file Drawer\n * @description\n * @author fex\n */\n\nimport React from 'react';\nimport Transition, {\n  ENTERED,\n  ENTERING,\n  EXITING\n} from 'react-transition-group/Transition';\nimport {Portal} from 'react-overlays';\nimport {Icon} from './icons';\nimport cx from 'classnames';\nimport {current, addModal, removeModal} from './ModalManager';\nimport {ClassNamesFn, themeable} from '../theme';\nimport {noop, autobind} from '../utils/helper';\n\ntype DrawerPosition = 'top' | 'right' | 'bottom' | 'left';\n\nexport interface DrawerProps {\n  className?: string;\n  size: any;\n  overlay: boolean;\n  onHide: () => void;\n  closeOnEsc?: boolean;\n  container: any;\n  show?: boolean;\n  position: DrawerPosition;\n  disabled?: boolean;\n  closeOnOutside?: boolean;\n  classPrefix: string;\n  classnames: ClassNamesFn;\n  onExited?: () => void;\n  onEntered?: () => void;\n  disableOnClickOutside: () => void;\n  enableOnClickOutside: () => void;\n}\nexport interface DrawerState {}\nconst fadeStyles: {\n  [propName: string]: string;\n} = {\n  [ENTERING]: 'in',\n  [ENTERED]: 'in'\n};\nexport class Drawer extends React.Component<DrawerProps, DrawerState> {\n  static defaultProps: Pick<\n    DrawerProps,\n    | 'container'\n    | 'position'\n    | 'size'\n    | 'overlay'\n    | 'disableOnClickOutside'\n    | 'enableOnClickOutside'\n  > = {\n    container: document.body,\n    position: 'left',\n    size: 'md',\n    overlay: true,\n    disableOnClickOutside: noop,\n    enableOnClickOutside: noop\n  };\n\n  contentDom: any;\n\n  componentDidMount() {\n    if (this.props.show) {\n      this.handleEntered();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.show) {\n      this.handleExited();\n    }\n  }\n\n  contentRef = (ref: any) => (this.contentDom = ref);\n  handleEntered = () => {\n    const onEntered = this.props.onEntered;\n    document.body.classList.add(`is-modalOpened`);\n    onEntered && onEntered();\n  };\n  handleExited = () => {\n    const onExited = this.props.onExited;\n    document.activeElement && (document.activeElement as HTMLElement).blur();\n    onExited && onExited();\n    setTimeout(() => {\n      document.querySelector('.amis-dialog-widget') ||\n        document.body.classList.remove(`is-modalOpened`);\n    }, 200);\n  };\n\n  modalRef = (ref: any) => {\n    if (ref) {\n      addModal(this);\n      (ref as HTMLElement).classList.add(\n        `${this.props.classPrefix}Modal--${current()}th`\n      );\n    } else {\n      removeModal();\n    }\n  };\n\n  @autobind\n  handleWidgetClick(e: React.MouseEvent) {\n    const {classPrefix: ns, closeOnOutside, onHide} = this.props;\n    if ((e.target as HTMLElement).closest(`.${ns}Drawer-content`)) {\n      return;\n    }\n    closeOnOutside && onHide && onHide();\n  }\n\n  render() {\n    const {\n      classPrefix: ns,\n      className,\n      children,\n      container,\n      show,\n      position,\n      size,\n      onHide,\n      disabled,\n      overlay\n    } = this.props;\n\n    return (\n      <Portal container={container}>\n        <Transition\n          mountOnEnter\n          unmountOnExit\n          in={show}\n          timeout={500}\n          onExited={this.handleExited}\n          onEntered={this.handleEntered}\n        >\n          {(status: string) => {\n            if (status === ENTERING) {\n              // force reflow\n              // 由于从 mount 进来到加上 in 这个 class 估计是时间太短，上次的样式还没应用进去，所以这里强制reflow一把。\n              // 否则看不到动画。\n              this.contentDom.offsetWidth;\n            }\n\n            return (\n              <div\n                ref={this.modalRef}\n                role=\"dialog\"\n                className={cx(\n                  `amis-dialog-widget ${ns}Drawer`,\n                  {\n                    [`${ns}Drawer--${position}`]: position,\n                    [`${ns}Drawer--${size}`]: size,\n                    [`${ns}Drawer--noOverlay`]: !overlay\n                  },\n                  className\n                )}\n                onClick={this.handleWidgetClick} // 其实不需要插件，直接写逻辑吧\n              >\n                {overlay ? (\n                  <div\n                    className={cx(`${ns}Drawer-overlay`, fadeStyles[status])}\n                  />\n                ) : null}\n                <div\n                  ref={this.contentRef}\n                  className={cx(`${ns}Drawer-content`, fadeStyles[status])}\n                >\n                  <a\n                    onClick={disabled ? undefined : onHide}\n                    className={`${ns}Drawer-close`}\n                  >\n                    <Icon icon=\"close\" className=\"icon\" />\n                  </a>\n                  {children}\n                </div>\n              </div>\n            );\n          }}\n        </Transition>\n      </Portal>\n    );\n  }\n}\n\nexport default themeable(Drawer);\n"
    ]
}